<!--로그인-->

<!DOCTYPE html>
<html
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layouts/user-layout}">
<body>
<div layout:fragment="content">
    <!--================Login Box Area =================-->
    <section class="login_box_area section-margin">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="login_box_img">
                        <div class="hover">
                            <h4>관리자 페이지</h4>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="login_form_inner">
                        <h3>E2BS</h3>
                        <form class="row login_form" action="/admin/admin/login" method="post" id="contactForm">
                            <div class="col-md-12 form-group">
                                <input type="text" class="form-control" id="memberId" name="memberId"
                                       placeholder="아이디 입력하세요" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '아이디 입력하세요'" required>
                            </div>
                            <div class="col-md-12 form-group">
                                <input type="password" class="form-control" id="customerPassword"
                                       name="customerPassword" placeholder="비밀번호 입력하세요" onfocus="this.placeholder = ''"
                                       onblur="this.placeholder = '비밀번호 입력하세요'" required>
                            </div>
                            <div class="col-md-12 form-group">
                                <button type="submit" value="submit" class="button button-login w-100">로그인</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- 로그인 실패 시 팝업창 -->
        <script>
            const urlParams = new URLSearchParams(window.location.search);
            const errorMessage = urlParams.get('error');

            if (errorMessage) {
                alert(decodeURIComponent(errorMessage));
            }
        </script>

        <!-- 휴면 상태 알림 모달 -->
        <div id="dormantModal">
            <h4>휴면 상태 안내</h4>
            <p>회원님의 계정은 휴면 상태입니다.<br>휴면 상태를 해제하시겠습니까?</p>
            <div style="display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;">
                <button onclick="closeDormantModal()" class="modal-btn btn-cancel">취소</button>
                <form action="/member/dormant/restore" method="post">
                    <button type="submit" class="modal-btn btn-confirm">해제</button>
                </form>
            </div>
        </div>
        <div id="modalBackdrop"></div>

        <!-- 모달 실행 스크립트 -->
        <script th:inline="javascript">
            /*<![CDATA[*/
            const memberState = /*[[${session.memberState}]]*/ null;

            if (memberState === 'DORMANT') {
                document.getElementById('dormantModal').style.display = 'block';
                document.getElementById('modalBackdrop').style.display = 'block';
            }

            function closeDormantModal() {
                document.getElementById('dormantModal').style.display = 'none';
                document.getElementById('modalBackdrop').style.display = 'none';
            }

            /*]]>*/
        </script>


    </section>
    <!--================End Login Box Area =================-->
</div>
</body>
</html>